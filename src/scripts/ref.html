<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
    <script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script type = "text/javascript">
       var start_message = "{'signal':'start','targets':['Lebot'],'baskets':['magenta']}";
       var pause_message = "{'signal':'stop','targets':['Lebot']}"
       var ws_url = "ws://127.0.0.1:8000"

       testWebSocket()

       function testWebSocket() {
          socket = new WebSocket(ws_url);
          socket.onopen = function(evt) {
             onOpen(evt)
          };
          socket.onmessage = function(evt) {
             onMessage(evt)
          };
          socket.onerror = function(evt) {
             onError(evt)
          };
          socket.onclose = function (evt){
             onClose(evt)
          };
       }
       function onOpen(e){
        document.getElementById("status").innerHTML = "Open";
       }
       function onMessage(e) {
        document.getElementById("status").innerHTML = "New Message";
       }
       function onError(e) {
        document.getElementById("status").innerHTML = "Error";
       }
       function onClose(e) {
        document.getElementById("status").innerHTML = "Close";
       }
       
       function resumeButtonFunction(e) {
          socket.send(start_message)
          document.getElementById("sent").innerHTML = start_message;
       }
       function pauseButtonFunction(e) {
          socket.send(start_message)
          document.getElementById("sent").innerHTML = pause_message;
       }

    </script>
</head>
<body>
  <h1>Test connection</h1>
  <p>Status: <span id="status"></span></p>
  <p>Last messaged sent: <span id="sent"></span></p>
  <p><button id="resumeButton" type="button" onclick="resumeButtonFunction()">Resume</button></p>
  <p><button id="pauseButton" type="button" onclick="pauseButtonFunction()">Pause</button></p>
</body>
</html>